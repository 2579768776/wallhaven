import{a as e,E as t,p as a,b as s,r as o,c as l,d as i,n,e as r,w as c,f as d,F as u,o as m,g,h as p,v as h,t as f,i as b,j as w,k as v,l as y,m as P,q as _,s as x,u as k,x as I,y as S,z as C,A as L,B as V,C as F,D as $,G as D}from"./vendor.40151da0.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();e.defaults.baseURL="http://localhost:1746",e.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",e.defaults.timeout=1e4,e.interceptors.request.use((e=>e),(e=>Promise.reject(e))),e.interceptors.response.use((e=>200==e.status?Promise.resolve(e):Promise.reject(e)),(e=>{t({message:`异常请求：${JSON.stringify(e.message)}`,type:"error",duration:2e3})}));var U={baseURL:e.defaults.baseURL,post:(t,a)=>new Promise(((s,o)=>{e({method:"post",url:t,data:JSON.stringify(a)}).then((e=>{s(e.data)})).catch((e=>{o(e)}))})),get:(t,a)=>new Promise(((s,o)=>{e({method:"get",url:t,params:a}).then((e=>{s(e.data)})).catch((e=>{o(e)}))}))},M=1,j=2,N=3,z=4,E=5,R=6,T=7,B=8,O=9,A=10;function H(e,t,a){this.__id__=e,a.objects[e]=this,this.__objectSignals__={},this.__propertyCache__={};var s=this;function o(e,t){var o=e[0],l=e[1];s[o]={connect:function(e){"function"==typeof e?(s.__objectSignals__[l]=s.__objectSignals__[l]||[],s.__objectSignals__[l].push(e),t||"destroyed"===o||a.exec({type:T,object:s.__id__,signal:l})):console.error("Bad callback given to connect to signal "+o)},disconnect:function(e){if("function"==typeof e){s.__objectSignals__[l]=s.__objectSignals__[l]||[];var i=s.__objectSignals__[l].indexOf(e);-1!==i?(s.__objectSignals__[l].splice(i,1),t||0!==s.__objectSignals__[l].length||a.exec({type:B,object:s.__id__,signal:l})):console.error("Cannot find connection of signal "+o+" to "+e.name)}else console.error("Bad callback given to disconnect from signal "+o)}}}function l(e,t){var a=s.__objectSignals__[e];a&&a.forEach((function(e){e.apply(e,t)}))}for(var e in this.unwrapQObject=function(e){if(e instanceof Array){for(var t=new Array(e.length),o=0;o<e.length;++o)t[o]=s.unwrapQObject(e[o]);return t}if(!e||!e["__QObject*__"]||void 0===e.id)return e;var l=e.id;if(a.objects[l])return a.objects[l];if(e.data){var i=new H(l,e.data,a);return i.destroyed.connect((function(){if(a.objects[l]===i){delete a.objects[l];var e=[];for(var t in i)e.push(t);for(var s in e)delete i[e[s]]}})),i.unwrapProperties(),i}console.error("Cannot unwrap unknown QObject "+l+" without data.")},this.unwrapProperties=function(){for(var e in s.__propertyCache__)s.__propertyCache__[e]=s.unwrapQObject(s.__propertyCache__[e])},this.propertyUpdate=function(e,t){for(var a in t){var o=t[a];s.__propertyCache__[a]=o}for(var i in e)l(i,e[i])},this.signalEmitted=function(e,t){l(e,t)},t.methods.forEach((function(e){var t=e[0],o=e[1];s[t]=function(){for(var e,t=[],l=0;l<arguments.length;++l)"function"==typeof arguments[l]?e=arguments[l]:t.push(arguments[l]);a.exec({type:R,object:s.__id__,method:o,args:t},(function(t){if(void 0!==t){var a=s.unwrapQObject(t);e&&e(a)}}))}})),t.properties.forEach((function(e){var t=e[0],l=e[1],i=e[2];s.__propertyCache__[t]=e[3],i&&(1===i[0]&&(i[0]=l+"Changed"),o(i,!0)),Object.defineProperty(s,l,{configurable:!0,get:function(){var e=s.__propertyCache__[t];return void 0===e&&console.warn('Undefined value in property cache for property "'+l+'" in object '+s.__id__),e},set:function(e){void 0!==e?(s.__propertyCache__[t]=e,a.exec({type:O,object:s.__id__,property:t,value:e})):console.warn("Property setter for "+l+" called with undefined value!")}})})),t.signals.forEach((function(e){o(e,!1)})),t.enums)s[e]=t.enums[e]}const W={name:"App",data:()=>({clientWidth:700,desktop_info:"",downloadList:{},downloadFinishedList:{}}),created(){this.loadDownloadFinishedList()},mounted(){this.clientWidth=document.documentElement.clientWidth,window.addEventListener("resize",this.onresize),this.startApp(),this.$inQt&&(this.connectTimer=setInterval(this.connect,1e3))},methods:{onresize(){null!=document.documentElement.clientWidth&&(this.clientWidth=document.documentElement.clientWidth)},connect(){void 0!==this.$qtBridge&&(this.$qtBridge.SigAddDownloadTask.connect(this.onDownloadAdd),this.$qtBridge.SigDownloadFinished.connect(this.onDownloadFinished),this.$qtBridge.SigDownloadCanceled.connect(this.onDownloadCanceled),this.$qtBridge.SigUpdatePageInfo.connect(this.onUpdatePageInfo),window.clearInterval(this.connectTimer))},onDownloadAdd(e){JSON.parse(e).forEach((e=>{this.downloadList[e.url]=e})),localStorage.setItem("downloadList",JSON.stringify(this.downloadList))},onDownloadFinished(e){let t=JSON.parse(e);delete this.downloadList[t.url],t.time=Date.now(),this.downloadFinishedList[t.url]=t,localStorage.setItem("downloadList",JSON.stringify(this.downloadList)),localStorage.setItem("downloadFinishedList",JSON.stringify(this.downloadFinishedList))},onDownloadCanceled(e){void 0!==this.downloadList[e]&&(delete this.downloadList[e],localStorage.setItem("downloadList",JSON.stringify(this.downloadList)))},onUpdatePageInfo(e){let t=JSON.parse(e);localStorage.setItem("current_page",t.current_page),localStorage.setItem("page_index",t.page_index),localStorage.setItem("local_bg_index",t.local_bg_index)},loadDownloadFinishedList(){let e=localStorage.getItem("downloadFinishedList");if(null!=e){let t=JSON.parse(e);if(Object.keys(t).length>20){let e=Object.values(t);e.sort((function(e,t){return t.time-e.time}));let a={};for(let t=0;t<20;t++)a[e[t].url]=e[t];this.downloadFinishedList=a,localStorage.setItem("downloadFinishedList",JSON.stringify(this.downloadFinishedList))}else this.downloadFinishedList=t}},delDownRecorder(e){delete this.downloadFinishedList[e],localStorage.setItem("downloadFinishedList",JSON.stringify(this.downloadFinishedList))},startApp(){let e=localStorage.getItem("downloadList");null!=e&&(this.downloadList=JSON.parse(e));let t={api_params:this.getLocalStorage("api_params","categories=111&purity=100&sorting=hot&order=desc","String"),api_key:this.getLocalStorage("api_key","","String"),schedule_time:this.getLocalStorage("schedule_time",0,"Number"),download_dir:this.getLocalStorage("download_dir","","String"),current_page:this.getLocalStorage("current_page",1,"Number"),page_index:this.getLocalStorage("page_index",0,"Number"),local_bg_index:this.getLocalStorage("local_bg_index",0,"Number"),total_page:this.getLocalStorage("total_page",0,"Number"),switch_model:this.getLocalStorage("switch_model","online","String"),downloadList:this.downloadList,auto_start:this.getLocalStorage("auto_start",0,"Number"),full_model:this.getLocalStorage("full_model",1,"Number"),bg_color:this.getLocalStorage("bg_color","rgb(8,8,8)","String")};this.$axios.post("/api/update_config",t).then((e=>{"set_download_dir"===e.info&&localStorage.setItem("download_dir",e.data.download_dir),this.desktop_info=e.desktopInfo}))},getLocalStorage(e,t,a){let s=localStorage.getItem(e);null==s&&localStorage.setItem(e,t);let o=null;return o="Number"===a?parseInt(null==s?t:s):null==s?t:s,o}},components:{},computed:{calContainerW(){let e=this.clientWidth-200;return e<800?800:e}}};a("data-v-5ebef262");const q={class:"left-menu"},J=i("div",{class:"logo-wrap"},null,-1),K={class:"menu-wrap"},Q=i("label",{class:"menu-title"},"我的壁纸",-1),G={class:"menu-ul"},X={class:"menu-item"},Y=i("i",{class:"fas fa-cloud"},null,-1),Z=g(" 在线壁纸"),ee=i("span",{class:"li-border"},null,-1),te={class:"menu-item"},ae=i("i",{class:"fas fa-folder"},null,-1),se=g(" 本地列表"),oe=i("span",{class:"li-border"},null,-1),le={class:"menu-item"},ie=i("i",{class:"fas fa-inbox-in"},null,-1),ne=g(" 下载中心"),re=i("span",{class:"li-border"},null,-1),ce=i("label",{class:"menu-title more"},"更多",-1),de={class:"menu-ul"},ue={class:"menu-item"},me=i("i",{class:"fas fa-cog"},null,-1),ge=g(" 设置"),pe=i("span",{class:"li-border"},null,-1),he={class:"menu-item"},fe=i("i",{class:"fas fa-info-circle"},null,-1),be=g(" 关于"),we=i("span",{class:"li-border"},null,-1);s(),W.render=function(e,t,a,s,g,p){const h=o("router-link"),f=o("router-view");return m(),l(u,null,[i("div",{class:n(["bg-container","/online"===e.$route.path?"online-bg":"/switch"===e.$route.path?"switch-bg":"/download"===e.$route.path?"download-bg":"/setting"===e.$route.path?"setting-bg":"/about"===e.$route.path?"about-bg":""])},null,2),i("div",q,[J,i("div",K,[Q,i("ul",G,[i("li",X,[r(h,{to:"/online",class:"menu-native"},{default:c((()=>[Y,Z,ee])),_:1})]),i("li",te,[r(h,{to:"/switch",class:"menu-native"},{default:c((()=>[ae,se,oe])),_:1})]),i("li",le,[r(h,{to:"download",class:"menu-native"},{default:c((()=>[ie,ne,re])),_:1})])]),ce,i("ul",de,[i("li",ue,[r(h,{to:"setting",class:"menu-native"},{default:c((()=>[me,ge,pe])),_:1})]),i("li",he,[r(h,{to:"about",class:"menu-native"},{default:c((()=>[fe,be,we])),_:1})])])])]),i("div",{class:"container",style:d({width:p.calContainerW+"px"})},[r(f,{downloadListLen:Object.keys(g.downloadList).length,downloadFinishedList:Object.values(g.downloadFinishedList),desktopInfo:g.desktop_info,onDelDownRecorder:p.delDownRecorder},null,8,["downloadListLen","downloadFinishedList","desktopInfo","onDelDownRecorder"])],4)],64)},W.__scopeId="data-v-5ebef262";const ve={name:"imgPreview",data:()=>({isLocal:!1,clientHeight:1080,imgBgSrc:""}),props:{showing:!1,imgInfo:{}},mounted(){this.clientHeight=document.documentElement.clientHeight,window.addEventListener("resize",this.onresize)},methods:{onresize(){null!=document.documentElement.clientHeight&&(this.clientHeight=document.documentElement.clientHeight)},close(){this.imgBgSrc=this.imgInfo.path,this.isLocal=!1,this.$emit("close",!1)},setBg(e){let t=Object.assign({},e);this.isLocal&&(t.path=t.path.replace(this.$imgPrefix,"")),this.$axios.post("/api/system/bgset",t).then((e=>{"success"===e?this.$message({message:"设置成功",type:"success",duration:2e3,customClass:"customer-message"}):"downloading"===e?this.$message({message:"正在下载，下载完成后切换",type:"success",duration:2e3,customClass:"customer-message"}):this.$message({message:e,type:"error",duration:2e3,customClass:"customer-message"})}))},downloadImg(e){let t={url:e.path,small:e.small,resolution:e.resolution};this.$axios.post("/api/online/download",t).then((e=>{"success"===e?this.$message({message:"已加入下载",type:"success",duration:2e3,customClass:"customer-message"}):"file exist"===e&&this.$message({message:"本地已存在同名文件",type:"warning",duration:2e3,customClass:"customer-message"})}))}},computed:{calHeight(){return parseInt(.9*this.clientHeight)+"px"}},watch:{imgInfo(e){void 0===this.imgInfo.small&&(this.isLocal=!0)}}};a("data-v-ca52de1a");const ye={class:"img-view"},Pe=["src"],_e=["src"],xe={class:"sidebar-fixed-wrapper",style:{bottom:"40px"}},ke={class:"details-sidebar-fixed-box hi-de"},Ie=[i("div",{class:"icon-wrap"},[i("i",{class:"fas fa-repeat-alt"})],-1)],Se=[i("div",{class:"icon-wrap"},[i("i",{class:"fas fa-download"})],-1)],Ce=i("div",{class:"back-to-top sidebar-fixed_box","z-st":"shortcut_totop",style:{display:"block"}},null,-1);s(),ve.render=function(e,t,a,s,o,r){return m(),l("div",{class:n(["mask",1==a.showing?"":"out"])},[i("a",{class:"close_btn",onClick:t[0]||(t[0]=(...e)=>r.close&&r.close(...e))}),i("div",ye,[i("img",{class:"img-class",src:a.imgInfo.path,style:d({"max-height":r.calHeight})},null,12,Pe),p(i("img",{class:"img-class close-bg",src:o.imgBgSrc,style:d({"max-height":r.calHeight})},null,12,_e),[[h,!a.showing]])]),i("div",xe,[i("div",ke,[i("div",{class:"sidebar-fixed_box comments-middle-icon",title:"设为壁纸",onClick:t[1]||(t[1]=e=>r.setBg(a.imgInfo))},Ie),p(i("div",{class:"sidebar-fixed_box share-middle-icon sidebar-share",title:"下载",onClick:t[2]||(t[2]=e=>r.downloadImg(a.imgInfo))},Se,512),[[h,!o.isLocal]])]),Ce])],2)},ve.__scopeId="data-v-ca52de1a";const Le={name:"pageHeader",data:()=>({}),methods:{minimize(){this.$qtBridge.minimizeWin()},maximize(){this.$qtBridge.maximizeWin()},closeWindow(){this.$qtBridge.closeWin()}},props:{title:""}};a("data-v-7d3fc6d6");const Ve={id:"header"};s(),Le.render=function(e,t,a,s,o,n){return m(),l("header",Ve,[i("label",null,f(a.title),1)])},Le.__scopeId="data-v-7d3fc6d6";const Fe={name:"onlineWall",data:()=>({title:"在线壁纸",isCurrent:!1,showImgPre:!1,preImgInfo:{},loading:!1,error:!1,apiKey:"",getParams:{category:111,purity:100,sorting:"hot",topRange:"1M",order:"desc",colors:null,ratios:"",atleast:null,resolutions:null,page:1},customParams:{selector:0,category:["general","anime","people"],purity:["sfw"],sorting:"hot",desc:!0,topRange:"1M",ratios:[],respickerLimitation:"exactly",resolutions:[],resolution:"",respickerCustomWidth:"",respickerCustomHeight:"",color:"none"},searchMeta:{resolutionsArray:[{item:["2560x1080","1280x720","1280x800","1280x960","1280x1024"]},{item:["3440x1440","1600x900","1600x1000","1600x1200","1600x1280"]},{item:["3840x1600","1920x1080","1920x1200","1920x1440","1920x1536"]},{item:["2560x1440","2560x1600","2560x1920","2560x2048"]},{item:["3840x2160","3840x2400","3840x2880","3840x3072"]}],ratiosArray:[{item:["16x9","21x9","9x16","1x1"]},{item:["16x10","32x9","10x16","3x2"]},{item:["","48x9","9x18","4x3"]},{item:["","","","5x4"]}],colorsArray:[{item:["660000","990000","cc0000","cc3333","ea4c88","993399"]},{item:["663399","333399","0066cc","0099cc","66cccc","77cc33"]},{item:["669900","336600","666600","999900","cccc33","ffff00"]},{item:["ffcc33","ff9900","ff6600","cc6633","996633","663300"]},{item:["000000","999999","cccccc","ffffff","424153","none"]}]},pageData:{totalPage:0,currentPage:0,sections:[]}}),props:["desktopInfo"],watch:{"customParams.category":{handler:function(){this.scrollEvent()}}},created:function(){this.isCurrent=!0;let e=localStorage.getItem("customParams");null==e?localStorage.setItem("customParams",JSON.stringify(this.customParams)):this.customParams=JSON.parse(e),this.loading=!0,this.formatGetParams(),this.getNextPage()},mounted(){window.addEventListener("scroll",this.scrollEvent),this.apiKey=localStorage.getItem("api_key")},unmounted(){window.removeEventListener("scroll",this.scrollEvent),this.isCurrent=!1},components:{pageHeader:Le,imgPreview:ve,ElTooltip:b},methods:{changeSelector(e){this.customParams.selector=this.customParams.selector===e?0:e},closePreview(e){this.preImgInfo={},this.showImgPre=e},preview(e){this.preImgInfo={path:e.path,resolution:e.resolution,small:e.thumbs.small},this.showImgPre=!0},downloadImg(e){let t={url:e.path,small:e.thumbs.small,resolution:e.resolution};this.$axios.post("/api/online/download",t).then((e=>{"success"===e?this.$message({message:"已加入下载",type:"success",duration:2e3,customClass:"customer-message"}):"file exist"===e&&this.$message({message:"本地已存在同名文件",type:"warning",duration:2e3,customClass:"customer-message"})}))},setBg(e){let t={path:e.path,resolution:e.resolution,small:e.thumbs.small};this.$axios.post("/api/system/bgset",t).then((e=>{"success"===e?this.$message({message:"设置成功",type:"success",duration:2e3,customClass:"customer-message"}):"downloading"===e?this.$message({message:"正在下载，下载完成后切换",type:"success",duration:2e3,customClass:"customer-message"}):this.$message({message:e,type:"error",duration:2e3,customClass:"customer-message"})}))},changeParams(){this.pageData.sections.length=0,this.pageData.currentPage=0,this.customParams.selector=0,0==this.customParams.category.length&&(this.customParams.category=["general","anime"]),0==this.customParams.purity.length&&(this.customParams.purity=["sfw"]),localStorage.setItem("customParams",JSON.stringify(this.customParams)),this.formatGetParams(),this.updateConfig(),this.getNextPage()},saveParams(){this.formatGetParams(),this.updateConfig(),this.$axios.get("/api/online/save-param",this.getParams).then((e=>{"success"===e?this.$message({message:"设置成功",type:"success",duration:2e3,customClass:"customer-message"}):this.$message({message:e,type:"error",duration:2e3,customClass:"customer-message"})}))},formatGetParams(){this.getParams={category:111,purity:100,sorting:"hot",topRange:"1M",order:"desc",colors:null,ratios:"",atleast:null,resolutions:null,page:1},this.getParams.category=this.formatCategory(),this.getParams.purity=this.formatPurity(),this.getParams.sorting=this.customParams.sorting,this.getParams.topRange=this.customParams.topRange,this.getParams.order=this.customParams.desc?"desc":"asc",this.getParams.colors="none"==this.customParams.color?null:this.customParams.color;let e=this.customParams.ratios.join(",");if(this.getParams.ratios=""==e?null:e,""!=this.customParams.respickerCustomWidth&&""!=this.customParams.respickerCustomHeight&&(this.getParams.atleast=this.customParams.respickerCustomWidth+"x"+this.customParams.respickerCustomHeight,this.customParams.resolutions.push(this.getParams.atleast)),"atleast"==this.customParams.respickerLimitation)""!=this.customParams.resolution&&null!=this.getParams.atleast&&(this.getParams.atleast=this.customParams.resolution);else{this.getParams.atleast=null;let e=this.customParams.resolutions.join(",");this.getParams.resolutions=""===e?null:e}},getNextPage(){console.log(this.getParams),this.pageData.currentPage++,this.getParams.page=this.pageData.currentPage,this.loading=!0,this.error=!1,this.$axios.get("/wallhaven/api/v1/search",this.getParams).then((e=>{this.pageData.currentPage=e.meta.current_page,this.pageData.totalPage=e.meta.last_page,this.pageData.sections.push(e.data),this.$nextTick((()=>{this.loading=!1,this.scrollEvent()}))})).catch((e=>{this.$nextTick((()=>{this.loading=!1})),this.error=!0}))},updateConfig(){let e=this.getParams,t=Object.keys(e).filter((function(t){return"page"!==t&&"null"!==encodeURIComponent(e[t])})).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&");localStorage.setItem("api_params",t)},scrollEvent(){this.$nextTick((()=>{document.body.scrollHeight-document.documentElement.scrollTop-document.body.clientHeight<=200&&!this.loading&&this.pageData.currentPage<this.pageData.totalPage&&this.isCurrent&&this.getNextPage()}))},formatCategory(){return String.format("{0}{1}{2}",Number(this.customParams.category.findIndex((e=>"general"===e))>-1),Number(this.customParams.category.findIndex((e=>"anime"===e))>-1),Number(this.customParams.category.findIndex((e=>"people"===e))>-1))},formatPurity(){return String.format("{0}{1}{2}",Number(this.customParams.purity.findIndex((e=>"sfw"===e))>-1),Number(this.customParams.purity.findIndex((e=>"sketchy"===e))>-1),Number(this.customParams.purity.findIndex((e=>"nsfw"===e))>-1))},formatMulti:e=>e.replace("x"," x "),formatFileSize:e=>e/1024/1024>1?parseFloat((e/1024/1024).toFixed(2))+"MB":parseInt(e/1024)+"KB",sortingFormat(e){switch(e){case"relevance":e="相关性";break;case"random":e="随机";break;case"date_added":e="日期";break;case"views":e="浏览量";break;case"favorites":e="收藏数";break;case"toplist":e="排行榜";break;case"hot":e="热度";break;default:e="排行榜"}return e},topRangeFormat(e){switch(e){case"1d":e="1 天";break;case"3d":e="3 天";break;case"1w":e="上周";break;case"1M":e="1 个月";break;case"3M":e="3 个月";break;case"6M":e="6 个月";break;case"1y":e="去年";break;default:e="上周"}return e}}};String.format=function(){if(0==arguments.length)return null;for(var e=arguments[0],t=1;t<arguments.length;t++){var a=new RegExp("\\{"+(t-1)+"\\}","gm");e=e.replace(a,arguments[t])}return e},a("data-v-dff1885a");const $e={id:"WallHaven"},De={id:"searchbar",class:"expanded"},Ue={id:"search-category-checks",class:"framed"},Me=i("label",{for:"search-general"},"普通",-1),je=i("label",{for:"search-anime"},"动漫",-1),Ne=i("label",{for:"search-people"},"人物",-1),ze={id:"search-purity-checks",class:"framed"},Ee=i("label",{class:"purity sfw",for:"search-sfw",title:"正经图"},"SFW",-1),Re=i("label",{class:"purity sketchy",for:"search-sketchy",title:"带点颜色"},"Sketchy",-1),Te={class:"purity nsfw",for:"search-nsfw",title:"开车图"},Be={id:"search-resolutions",class:"framed searchbar-dropdown"},Oe={class:"framed"},Ae=i("label",{for:"searchbar-respicker-atleast"},[i("i",{class:"far fa-plus"}),g(" 至少 ")],-1),He=i("label",{for:"searchbar-respicker-exactly"},[i("i",{class:"far fa-dot-circle"}),g(" 精确的 ")],-1),We={class:"respicker"},qe={class:"respicker-native-info"},Je=g(" 你的屏幕分辨率："),Ke=g("."),Qe={class:"label-table"},Ge=i("thead",null,[i("tr",null,[i("th",null,"Ultrawide"),i("th",null,"16:9"),i("th",null,"16:10"),i("th",null,"4:3"),i("th",null,"5:4")])],-1),Xe=["id","value"],Ye=["id","value"],Ze=["for"],et=i("hr",null,null,-1),tt={class:"respicker-custom oneline framed"},at=i("label",{for:"searchbar-respicker-custom-width"},"自定义分辨率",-1),st=i("label",{class:"respicker-custom-separator"},[i("i",{class:"far fa-times"})],-1),ot={id:"search-ratios",class:"framed searchbar-dropdown"},lt={style:{padding:".5em 1em"}},it={class:"respicker"},nt={class:"label-table"},rt=i("thead",null,[i("tr",null,[i("th",null,"宽屏"),i("th",null,"超宽屏"),i("th",null,"竖屏"),i("th",null,"方屏")])],-1),ct={colspan:"2"},dt=i("label",{for:"searchbar-ratio-landscape"}," 全部横屏 ",-1),ut=i("label",{for:"searchbar-ratio-portrait"},"全部竖屏",-1),mt=["value","id"],gt=["for"],pt={id:"search-colors",class:"framed searchbar-dropdown"},ht={style:{padding:".5em 1em"}},ft={class:"colorpicker"},bt={class:"label-table"},wt=["id","value"],vt=["for"],yt={id:"search-sorting",class:"framed searchbar-dropdown"},Pt=i("label",{for:"search-order","original-title":"Ascending/Descending"},null,-1),_t=i("label",{for:"search-sorting-relevance"},"相关性",-1),xt=i("label",{for:"search-sorting-random"},"随机",-1),kt=i("label",{for:"search-sorting-date"},"日期",-1),It=i("label",{for:"search-sorting-views"},"浏览量",-1),St=i("label",{for:"search-sorting-favorites"},"收藏数",-1),Ct=i("label",{for:"search-sorting-toplist"},"排行榜",-1),Lt=i("label",{for:"search-sorting-hot"},"热度",-1),Vt=i("label",{for:"searchbar-toplist-range-1d"},"1 天",-1),Ft=i("label",{for:"searchbar-toplist-range-3d"},"3 天",-1),$t=i("label",{for:"searchbar-toplist-range-1w"},"上周",-1),Dt=i("label",{for:"searchbar-toplist-range-1M"},"1 个月",-1),Ut=i("label",{for:"searchbar-toplist-range-3M"},"3 个月",-1),Mt=i("label",{for:"searchbar-toplist-range-6M"},"6 个月",-1),jt=i("label",{for:"searchbar-toplist-range-1y"},"去年",-1),Nt=[i("i",{class:"fas fa-sync"},null,-1)],zt=[i("i",{class:"fas fa-save"},null,-1)],Et={id:"main"},Rt={id:"thumbs",class:"thumbs-container thumb-listing infinite-scroll"},Tt={class:"thumb-listing-page"},Bt={key:0,class:"thumb-listing-page-header"},Ot=g("Page "),At={class:"thumb-listing-page-num"},Ht=i("a",{class:"icon to-top",href:"#top",title:"Back to top"},[i("i",{class:"far fa-lg fa-chevron-up"})],-1),Wt=["data-wallpaper-id"],Jt=["onClick"],Kt=[i("i",{class:"fas fa-fw fa-repeat-alt"},null,-1)],Qt=["data-src","src"],Gt=["onClick"],Xt={class:"thumb-info"},Yt={class:"wall-res"},Zt={class:"jsAnchor overlay-anchor wall-favs"},ea={key:0,class:"png"},ta=[i("span",null,"PNG",-1)],aa=["onClick"],sa=[i("i",{class:"fas fa-fw fa-download"},null,-1)],oa={class:"main-bottom"},la={class:"loading-span"},ia=[i("i",{class:"fas fa-spinner"},null,-1)],na={class:"error-span"},ra=[i("i",{class:"fas fa-times"},[i("br"),g("network error")],-1)];s(),Fe.render=function(e,t,a,s,b,x){const k=o("imgPreview"),I=o("pageHeader"),S=o("el-tooltip");return m(),l(u,null,[r(k,{onClose:x.closePreview,showing:b.showImgPre,imgInfo:b.preImgInfo},null,8,["onClose","showing","imgInfo"]),i("div",$e,[r(I,{title:b.title},null,8,["title"]),i("form",De,[i("div",Ue,[p(i("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=e=>b.customParams.category=e),name:"general",value:"general",id:"search-general"},null,512),[[w,b.customParams.category]]),Me,p(i("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=e=>b.customParams.category=e),name:"anime",value:"anime",id:"search-anime"},null,512),[[w,b.customParams.category]]),je,p(i("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=e=>b.customParams.category=e),name:"people",value:"people",id:"search-people"},null,512),[[w,b.customParams.category]]),Ne]),i("div",ze,[p(i("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=e=>b.customParams.purity=e),name:"sfw",value:"sfw",id:"search-sfw"},null,512),[[w,b.customParams.purity]]),Ee,p(i("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=e=>b.customParams.purity=e),name:"sketchy",value:"sketchy",id:"search-sketchy"},null,512),[[w,b.customParams.purity]]),Re,p(i("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=e=>b.customParams.purity=e),name:"nsfw",value:"nsfw",id:"search-nsfw"},null,512),[[h,""!==b.apiKey],[w,b.customParams.purity]]),p(i("label",Te,"NSFW",512),[[h,""!==b.apiKey]])]),i("div",Be,[i("a",{class:n(["jsAnchor dropdown-toggle",1==b.customParams.selector?"extended":"collapsed"]),onClick:t[6]||(t[6]=e=>x.changeSelector(1))},"分辨率",2),i("div",{class:n(["dropdown ",1==b.customParams.selector?"extended":"collapsed"])},[i("div",null,[i("div",Oe,[p(i("input",{type:"radio","onUpdate:modelValue":t[7]||(t[7]=e=>b.customParams.respickerLimitation=e),name:"searchbar-respicker-limitation",id:"searchbar-respicker-atleast",value:"atleast"},null,512),[[v,b.customParams.respickerLimitation]]),Ae,p(i("input",{type:"radio","onUpdate:modelValue":t[8]||(t[8]=e=>b.customParams.respickerLimitation=e),name:"searchbar-respicker-limitation",id:"searchbar-respicker-exactly",value:"exactly"},null,512),[[v,b.customParams.respickerLimitation]]),He]),i("div",We,[p(i("p",qe,[Je,i("strong",null,[i("em",null,f(a.desktopInfo),1)]),Ke],512),[[h,""!==a.desktopInfo]]),i("table",Qe,[Ge,i("tbody",null,[(m(!0),l(u,null,y(b.searchMeta.resolutionsArray,((e,a)=>(m(),l("tr",null,[(m(!0),l(u,null,y(e.item,((e,a)=>(m(),l("td",null,["atleast"!=b.customParams.respickerLimitation?p((m(),l("input",{key:0,type:"checkbox",name:"respicker-resolution",id:"searchbar-respicker-"+e,value:e,"onUpdate:modelValue":t[9]||(t[9]=e=>b.customParams.resolutions=e)},null,8,Xe)),[[w,b.customParams.resolutions]]):_("",!0),"atleast"==b.customParams.respickerLimitation?p((m(),l("input",{key:1,type:"radio",name:"respicker-resolution",id:"searchbar-respicker-"+e,value:e,"onUpdate:modelValue":t[10]||(t[10]=e=>b.customParams.resolution=e)},null,8,Ye)),[[v,b.customParams.resolution]]):_("",!0),i("label",{for:"searchbar-respicker-"+e,"original-title":"Dual 1080p"},f(x.formatMulti(e)),9,Ze)])))),256))])))),256))])]),et,i("div",tt,[at,p(i("input",{type:"text",pattern:"[0-9]{0,5}","onUpdate:modelValue":t[11]||(t[11]=e=>b.customParams.respickerCustomWidth=e),name:"respicker-custom-width",id:"searchbar-respicker-custom-width",placeholder:"Width",maxlength:"5"},null,512),[[P,b.customParams.respickerCustomWidth]]),st,p(i("input",{type:"text",pattern:"[0-9]{0,5}","onUpdate:modelValue":t[12]||(t[12]=e=>b.customParams.respickerCustomHeight=e),name:"respicker-custom-height",id:"searchbar-respicker-custom-height",placeholder:"Height",maxlength:"5"},null,512),[[P,b.customParams.respickerCustomHeight]])])])])],2)]),i("div",ot,[i("a",{class:n(["jsAnchor dropdown-toggle",2==b.customParams.selector?"extended":"collapsed"]),onClick:t[13]||(t[13]=e=>x.changeSelector(2)),style:{"min-width":"5em"}},"比例",2),i("div",{class:n(["dropdown",2==b.customParams.selector?"extended":"collapsed"])},[i("div",lt,[i("div",it,[i("table",nt,[rt,i("tbody",null,[i("tr",null,[i("td",ct,[p(i("input",{type:"checkbox",name:"ratio","onUpdate:modelValue":t[14]||(t[14]=e=>b.customParams.ratios=e),value:"landscape",class:"ratio",id:"searchbar-ratio-landscape"},null,512),[[w,b.customParams.ratios]]),dt]),i("td",null,[p(i("input",{type:"checkbox",name:"ratio","onUpdate:modelValue":t[15]||(t[15]=e=>b.customParams.ratios=e),value:"portrait",class:"ratio",id:"searchbar-ratio-portrait"},null,512),[[w,b.customParams.ratios]]),ut])]),(m(!0),l(u,null,y(b.searchMeta.ratiosArray,((e,a)=>(m(),l("tr",null,[(m(!0),l(u,null,y(e.item,((e,a)=>(m(),l("td",null,[""!=e?p((m(),l("input",{key:0,"onUpdate:modelValue":t[16]||(t[16]=e=>b.customParams.ratios=e),type:"checkbox",name:"ratio",value:e,class:"ratio",id:"searchbar-ratio-"+e},null,8,mt)),[[w,b.customParams.ratios]]):_("",!0),i("label",{for:"searchbar-ratio-"+e},f(x.formatMulti(e)),9,gt)])))),256))])))),256))])])])])],2)]),i("div",pt,[i("a",{class:n(["jsAnchor dropdown-toggle",3==b.customParams.selector?"extended":"collapsed"]),onClick:t[17]||(t[17]=e=>x.changeSelector(3)),style:d([{"border-radius":"3px"},"none"!=b.customParams.color?"background-color: #"+b.customParams.color+";":""])},"颜色",6),i("div",{class:n(["dropdown",3==b.customParams.selector?"extended":"collapsed"])},[i("div",ht,[i("div",ft,[i("table",bt,[i("tbody",null,[(m(!0),l(u,null,y(b.searchMeta.colorsArray,((e,a)=>(m(),l("tr",null,[(m(!0),l(u,null,y(e.item,((e,a)=>(m(),l("td",null,[p(i("input",{type:"radio","onUpdate:modelValue":t[18]||(t[18]=e=>b.customParams.color=e),name:"search-colors",id:"search-colors-"+e,value:e},null,8,wt),[[v,b.customParams.color]]),i("label",{for:"search-colors-"+e,style:d("none"==e?"height: 2em;background:linear-gradient(18deg, rgba(255,255,255,1) 42%,rgba(255,0,0,1) 45%,rgba(255,0,0,1) 55%,rgba(255,255,255,1) 58%);":"background: #"+e+"; height: 2em;")},null,12,vt)])))),256))])))),256))])])])])],2)]),i("div",yt,[p(i("input",{type:"checkbox",name:"order","onUpdate:modelValue":t[19]||(t[19]=e=>b.customParams.desc=e),value:"desc",id:"search-order"},null,512),[[w,b.customParams.desc]]),Pt,i("a",{class:n(["jsAnchor dropdown-toggle",4==b.customParams.selector?"extended":"collapsed"]),onClick:t[20]||(t[20]=e=>x.changeSelector(4)),style:{width:"7em"}},f(x.sortingFormat(b.customParams.sorting)),3),i("div",{class:n(["dropdown",4==b.customParams.selector?"extended":"collapsed"])},[i("div",null,[p(i("input",{type:"radio","onUpdate:modelValue":t[21]||(t[21]=e=>b.customParams.sorting=e),name:"sorting",value:"relevance",id:"search-sorting-relevance"},null,512),[[v,b.customParams.sorting]]),_t,p(i("input",{type:"radio","onUpdate:modelValue":t[22]||(t[22]=e=>b.customParams.sorting=e),name:"sorting",value:"random",id:"search-sorting-random"},null,512),[[v,b.customParams.sorting]]),xt,p(i("input",{type:"radio","onUpdate:modelValue":t[23]||(t[23]=e=>b.customParams.sorting=e),name:"sorting",value:"date_added",id:"search-sorting-date"},null,512),[[v,b.customParams.sorting]]),kt,p(i("input",{type:"radio","onUpdate:modelValue":t[24]||(t[24]=e=>b.customParams.sorting=e),name:"sorting",value:"views",id:"search-sorting-views"},null,512),[[v,b.customParams.sorting]]),It,p(i("input",{type:"radio","onUpdate:modelValue":t[25]||(t[25]=e=>b.customParams.sorting=e),name:"sorting",value:"favorites",id:"search-sorting-favorites"},null,512),[[v,b.customParams.sorting]]),St,p(i("input",{type:"radio","onUpdate:modelValue":t[26]||(t[26]=e=>b.customParams.sorting=e),name:"sorting",value:"toplist",id:"search-sorting-toplist",checked:""},null,512),[[v,b.customParams.sorting]]),Ct,p(i("input",{type:"radio","onUpdate:modelValue":t[27]||(t[27]=e=>b.customParams.sorting=e),name:"sorting",value:"hot",id:"search-sorting-hot"},null,512),[[v,b.customParams.sorting]]),Lt])],2)]),i("div",{style:d("toplist"!=b.customParams.sorting?"visibility:hidden":""),id:"search-toplist-range",class:"framed searchbar-dropdown"},[i("a",{class:n(["jsAnchor dropdown-toggle",5==b.customParams.selector?"extended":"collapsed"]),onClick:t[28]||(t[28]=e=>x.changeSelector(5)),style:{width:"8.5em"}},f(x.topRangeFormat(b.customParams.topRange)),3),i("div",{class:n(["dropdown",5==b.customParams.selector?"extended":"collapsed"])},[i("div",null,[p(i("input",{type:"radio","onUpdate:modelValue":t[29]||(t[29]=e=>b.customParams.topRange=e),name:"top",value:"1d",id:"searchbar-toplist-range-1d"},null,512),[[v,b.customParams.topRange]]),Vt,p(i("input",{type:"radio","onUpdate:modelValue":t[30]||(t[30]=e=>b.customParams.topRange=e),name:"top",value:"3d",id:"searchbar-toplist-range-3d"},null,512),[[v,b.customParams.topRange]]),Ft,p(i("input",{type:"radio","onUpdate:modelValue":t[31]||(t[31]=e=>b.customParams.topRange=e),name:"top",value:"1w",id:"searchbar-toplist-range-1w"},null,512),[[v,b.customParams.topRange]]),$t,p(i("input",{type:"radio","onUpdate:modelValue":t[32]||(t[32]=e=>b.customParams.topRange=e),name:"top",value:"1M",id:"searchbar-toplist-range-1M",checked:""},null,512),[[v,b.customParams.topRange]]),Dt,p(i("input",{type:"radio","onUpdate:modelValue":t[33]||(t[33]=e=>b.customParams.topRange=e),name:"top",value:"3M",id:"searchbar-toplist-range-3M"},null,512),[[v,b.customParams.topRange]]),Ut,p(i("input",{type:"radio","onUpdate:modelValue":t[34]||(t[34]=e=>b.customParams.topRange=e),name:"top",value:"6M",id:"searchbar-toplist-range-6M"},null,512),[[v,b.customParams.topRange]]),Mt,p(i("input",{type:"radio","onUpdate:modelValue":t[35]||(t[35]=e=>b.customParams.topRange=e),name:"top",value:"1y",id:"searchbar-toplist-range-1y"},null,512),[[v,b.customParams.topRange]]),jt])],2)],4),i("button",{type:"button",class:"button",id:"search-submit",onClick:t[36]||(t[36]=(...e)=>x.changeParams&&x.changeParams(...e))},Nt),r(S,{content:"设置为在线切换模式参数",placement:"bottom",effect:"light","popper-class":"custom-tips"},{default:c((()=>[i("button",{type:"button",class:"button",id:"search-save",onClick:t[37]||(t[37]=(...e)=>x.saveParams&&x.saveParams(...e))},zt)])),_:1})]),i("main",Et,[i("div",Rt,[(m(!0),l(u,null,y(b.pageData.sections,((e,t)=>(m(),l("section",Tt,[0!==t?(m(),l("header",Bt,[i("h2",null,[Ot,i("span",At,f(t+1),1),g(" / "+f(b.pageData.totalPage),1)]),Ht])):_("",!0),i("ul",null,[(m(!0),l(u,null,y(e,((e,t)=>(m(),l("li",null,[b.customParams.category.indexOf(e.category)>-1?(m(),l("figure",{key:0,class:n(["thumb","thumb-"+e.id+" thumb-"+e.purity+" thumb-"+e.category]),"data-wallpaper-id":e.id,style:{width:"300px",height:"200px"}},[i("a",{class:"thumb-btn thumb-btn-fav jsAnchor overlay-anchor",title:"设为壁纸",onClick:t=>x.setBg(e)},Kt,8,Jt),i("img",{alt:"loading",loading:"lazy",class:"lazyload loaded","data-src":e.thumbs.small,src:e.thumbs.small},null,8,Qt),i("a",{class:"preview",onClick:t=>x.preview(e)},null,8,Gt),i("div",Xt,[i("span",Yt,f(x.formatMulti(e.resolution)),1),i("a",Zt,f(x.formatFileSize(e.file_size)),1),"image/png"===e.file_type?(m(),l("span",ea,ta)):_("",!0),i("a",{class:"jsAnchor thumb-tags-toggle tagged",onClick:t=>x.downloadImg(e)},sa,8,aa)])],10,Wt)):_("",!0)])))),256))])])))),256))]),i("div",oa,[p(i("div",la,ia,512),[[h,b.loading]]),p(i("div",na,ra,512),[[h,b.error]])])])])],64)},Fe.__scopeId="data-v-dff1885a";const ca={name:"switchList",data:()=>({title:"本地列表",showImgPre:!1,preImgInfo:{},loading:!1,error:!1,pageData:{totalPage:0,currentPage:0,sections:[]}}),created:function(){this.loading=!0,this.getNextPage()},mounted(){window.addEventListener("scroll",this.scrollEvent)},unmounted(){window.removeEventListener("scroll",this.scrollEvent)},components:{imgPreview:ve,pageHeader:Le},methods:{closePreview(e){this.preImgInfo={},this.showImgPre=e},preview(e){this.showImgPre=!0,this.preImgInfo={path:this.$imgPrefix+e.path}},getNextPage(){this.pageData.currentPage++,this.loading=!0,this.error=!1,this.$axios.get("/api/switch/list",{page:this.pageData.currentPage,pageSize:24}).then((e=>{this.pageData.currentPage=e.meta.current_page,this.pageData.totalPage=e.meta.last_page,this.pageData.sections.push(e.data),this.$nextTick((()=>{this.loading=!1}))})).catch((e=>{this.$nextTick((()=>{this.loading=!1})),this.error=!0}))},scrollEvent(){document.body.scrollHeight-document.documentElement.scrollTop-document.body.clientHeight<=200&&!this.loading&&this.pageData.currentPage<this.pageData.totalPage&&this.getNextPage()},getImgInfo(e,t){let a=this.pageData.sections[e][t],s=new Image;s.src=this.$imgPrefix+a.path,s.onload=function(){a.resolution=s.width+" x "+s.height}},setBg(e){let t={path:e.path};this.$axios.post("/api/system/bgset",t).then((e=>{"success"===e?this.$message({message:"设置成功",type:"success",duration:2e3,customClass:"customer-message"}):"downloading"===e?this.$message({message:"正在下载，下载完成后切换",type:"success",duration:2e3,customClass:"customer-message"}):this.$message({message:e,type:"error",duration:2e3,customClass:"customer-message"})}))},formatMulti:e=>e.replace("x"," x "),formatFileSize:e=>e/1024/1024>1?parseFloat((e/1024/1024).toFixed(2))+"MB":parseInt(e/1024)+"KB"}};String.format=function(){if(0==arguments.length)return null;for(var e=arguments[0],t=1;t<arguments.length;t++){var a=new RegExp("\\{"+(t-1)+"\\}","gm");e=e.replace(a,arguments[t])}return e},a("data-v-d428fe28");const da={id:"main"},ua={id:"thumbs",class:"thumbs-container thumb-listing infinite-scroll"},ma={class:"thumb-listing-page"},ga={key:0,class:"thumb-listing-page-header"},pa=g("Page "),ha={class:"thumb-listing-page-num"},fa=i("a",{class:"icon to-top",href:"#top",title:"Back to top"},[i("i",{class:"far fa-lg fa-chevron-up"})],-1),ba=["data-wallpaper-id"],wa=["onClick"],va=[i("i",{class:"fas fa-repeat-alt"},null,-1)],ya=["data-src","src"],Pa=["onClick"],_a={class:"thumb-info"},xa={class:"wall-res"},ka={class:"jsAnchor overlay-anchor wall-favs","data-href":"https://wallhaven.cc/wallpaper/fav/x8kwd3"},Ia={key:0,class:"png"},Sa=[i("span",null,"PNG",-1)],Ca={class:"main-bottom"},La={class:"loading-span"},Va=[i("i",{class:"fas fa-spinner"},null,-1)],Fa={class:"error-span"},$a=[i("i",{class:"fas fa-times"},[i("br"),g("network error")],-1)];s(),ca.render=function(e,t,a,s,c,d){const b=o("imgPreview"),w=o("pageHeader");return m(),l(u,null,[r(b,{onClose:d.closePreview,showing:c.showImgPre,imgInfo:c.preImgInfo},null,8,["onClose","showing","imgInfo"]),i("div",null,[r(w,{title:c.title},null,8,["title"]),i("main",da,[i("div",ua,[(m(!0),l(u,null,y(c.pageData.sections,((e,t)=>(m(),l("section",ma,[0!=t?(m(),l("header",ga,[i("h2",null,[pa,i("span",ha,f(t+1),1),g(" / "+f(c.pageData.totalPage),1)]),fa])):_("",!0),i("ul",null,[(m(!0),l(u,null,y(e,((e,a)=>(m(),l("li",null,[i("figure",{class:n(["thumb","thumb-"+e.id+" thumb-general"]),"data-wallpaper-id":e.id,style:{width:"300px",height:"200px"}},[i("a",{class:"thumb-btn thumb-btn-fav jsAnchor overlay-anchor",onClick:t=>d.setBg(e)},va,8,wa),i("img",{alt:"loading",loading:"lazy",style:{width:"300px",height:"200px","object-fit":"cover"},class:"lazyload loaded","data-src":this.$imgPrefix+e.path,src:this.$imgPrefix+e.path},null,8,ya),i("a",{class:"preview",onClick:t=>d.preview(e)},null,8,Pa),i("div",_a,[i("span",xa,f(e.resolution)+f(d.getImgInfo(t,a)),1),i("a",ka,f(d.formatFileSize(e.file_size)),1),"image/png"===e.file_type?(m(),l("span",Ia,Sa)):_("",!0)])],10,ba)])))),256))])])))),256))]),i("div",Ca,[p(i("div",La,Va,512),[[h,c.loading]]),p(i("div",Fa,$a,512),[[h,c.error]])])])])],64)},ca.__scopeId="data-v-d428fe28";const Da={name:"downloadList",data:()=>({title:"下载中心",imagesFolder:"",downloadDataList:[],updateDataTimer:null}),components:{pageHeader:Le},props:{downloadListLen:0,downloadFinishedList:[]},created(){this.getDownloadDataList(),this.imagesFolder=localStorage.getItem("download_dir"),this.downloadFinishedList.sort((function(e,t){return t.time-e.time}))},mounted(){},unmounted(){null!=this.updateDataTimer&&window.clearTimeout(this.updateDataTimer)},methods:{getDownloadDataList(){this.$axios.get("/api/download/list",{}).then((e=>{this.downloadDataList=e.data,e.data.length>0?this.updateDataTimer=setTimeout(this.getDownloadDataList,1e3):this.updateDataTimer=null}))},cancelDownload(e){let t=this.downloadDataList[e];this.$axios.get("/api/download/cancel",{durl:t.url}).then((t=>{"success"==t?this.downloadDataList.splice(e,1):console.log(t)}))},pauseDownload(e){this.$axios.get("/api/download/pause",{durl:e.url}).then((t=>{"success"==t?e.state="paused":console.log(t)}))},resumeDownload(e){this.$axios.get("/api/download/resume",{durl:e.url}).then((t=>{"success"==t?e.state="waiting":console.log(t)}))},delRecorder(e){this.$emit("delDownRecorder",e)},openFolder(){void 0!==this.$qtBridge&&this.$qtBridge.openFolder(this.imagesFolder)},formatMulti:e=>e.replace("x"," x "),formatFileSize:e=>0==e?"未知":e/1024/1024>1?parseFloat((e/1024/1024).toFixed(2))+" MB":parseInt(e/1024)+" KB",formatSpeed:e=>e/1024/1024>1?parseFloat((e/1024/1024).toFixed(2))+" MB/s":parseInt(e/1024)+" kb/s",formatTime(e){return console.log(e),this.$DataFormat(new Date(e),"yyyy-MM-dd hh:mm")}},watch:{downloadListLen:function(e){e>0&&null===this.updateDataTimer&&this.getDownloadDataList()},downloadFinishedList(e){this.downloadFinishedList.sort((function(e,t){return t.time-e.time}))}}};a("data-v-3b36cb70");const Ua={class:"download-center"},Ma={class:"dowloading"},ja=i("div",{class:"m-title"},[i("a",{class:"dowloading-title"},"下载中")],-1),Na={class:"dowload-list"},za={class:"img-view"},Ea=["src"],Ra={class:"down-content"},Ta={class:"img-info"},Ba={class:"rigth-top"},Oa=["onClick"],Aa=[i("i",{class:"fas fw fa-pause-circle"},null,-1)],Ha=["onClick"],Wa=[i("i",{class:"fas fw fa-play-circle"},null,-1)],qa=["onClick"],Ja=[i("i",{class:"fas fw fa-times-circle"},null,-1)],Ka={class:"img-resolution"},Qa={class:"file-size"},Ga={class:"rigth-bottoim"},Xa={class:"dowload-state"},Ya={class:"dowload-state"},Za={class:"dowloaded-size"},es={class:"dowloaded-process"},ts={key:0,class:"empty-list"},as={class:"dowloaded"},ss=i("div",{class:"m-title"},[i("a",{class:"dowload-title"},"已完成"),i("a",{style:{"font-size":"10px"}},"（只保留最后20条记录）")],-1),os={class:"dowload-list"},ls={class:"dowload-item"},is={class:"img-view"},ns=["src"],rs={class:"down-content"},cs={class:"img-info"},ds=["onClick"],us=[i("i",{class:"fas fw fa-trash"},null,-1)],ms=[i("i",{class:"fas fw fa-folder-open"},null,-1)],gs={class:"dowload-date"},ps={class:"downloaded-info"},hs={class:"img-resolution"},fs={class:"file-size"},bs=i("div",{class:"img-info"},null,-1),ws={key:0,class:"empty-list"};s(),Da.render=function(e,t,a,s,c,g){const b=o("pageHeader");return m(),l(u,null,[r(b,{title:c.title},null,8,["title"]),i("div",Ua,[i("div",Ma,[ja,p(i("div",Na,[(m(!0),l(u,null,y(c.downloadDataList,((e,t)=>(m(),l("div",{class:n(["dowload-item","paused"===e.state?"pause-item":""])},[i("div",za,[i("img",{class:"img-context",src:e.small},null,8,Ea)]),i("div",Ra,[i("div",Ta,[i("div",Ba,[p(i("div",{class:"op-pause",onClick:t=>g.pauseDownload(e)},Aa,8,Oa),[[h,"downloading"===e.state]]),p(i("div",{class:"op-resume",onClick:t=>g.resumeDownload(e)},Wa,8,Ha),[[h,"paused"===e.state]]),i("div",{class:"op-cancel",onClick:e=>g.cancelDownload(t)},Ja,8,qa)]),i("div",Ka,"尺寸："+f(g.formatMulti(e.resolution)),1),i("div",Qa,"图片大小："+f(g.formatFileSize(e.bytesTotal)),1),i("div",Ga,[p(i("div",{class:"dowload-speed"}," 下载速度："+f(g.formatSpeed(e.speed)),513),[[h,"downloading"===e.state]]),p(i("div",Xa,"等待中",512),[[h,"waiting"===e.state]]),p(i("div",Ya,"已暂停",512),[[h,"paused"===e.state]]),i("div",Za,"已下载："+f(g.formatFileSize(e.bytesReceived)),1)]),i("div",es,[i("div",{class:"dowloaded-process-block",style:d({width:e.finishedRatio+"%"})},null,4)])])])],2)))),256))],512),[[h,c.downloadDataList.length>0]]),c.downloadDataList.length<=0?(m(),l("div",ts," 没有正在下载中的任务~ ")):_("",!0)]),i("div",as,[ss,i("div",os,[(m(!0),l(u,null,y(a.downloadFinishedList,((e,a)=>(m(),l("div",ls,[i("div",is,[i("img",{class:"img-context",src:e.small},null,8,ns)]),i("div",rs,[i("div",cs,[i("div",{class:"op-del",onClick:t=>g.delRecorder(e.url)},us,8,ds),i("div",{class:"op-open",onClick:t[0]||(t[0]=e=>g.openFolder())},ms),i("div",gs,f(g.formatTime(e.time)),1),i("div",ps,[i("div",hs,"尺寸："+f(g.formatMulti(e.resolution)),1),i("div",fs,"图片大小："+f(g.formatFileSize(e.bytesTotal)),1)]),bs])])])))),256))]),a.downloadFinishedList.length<=0?(m(),l("div",ws," 没有完成的任务~ ")):_("",!0)])])],64)},Da.__scopeId="data-v-3b36cb70";const vs={name:"setting",data:()=>({title:"设置",saving:!1,switchModel:"online",imagesFolder:"",scheduleTime:0,autoStart:0,apiKey:"",fullModel:0,bgColor:"rgb(88,88,88)"}),components:{ElRadio:x,ElInput:k,ElTooltip:b,ElColorPicker:I,pageHeader:Le},props:[],created(){void 0!==this.$qtBridge&&this.$qtBridge.SigImgFolderChanged.connect(this.onImagesFolderChange),this.imagesFolder=localStorage.getItem("download_dir"),this.switchModel=localStorage.getItem("switch_model"),this.fullModel=parseInt(localStorage.getItem("full_model")),this.bgColor=localStorage.getItem("bg_color"),console.log(this.bgColor),this.scheduleTime=parseInt(localStorage.getItem("schedule_time")),this.apiKey=localStorage.getItem("api_key"),this.autoStart=parseInt(localStorage.getItem("auto_start"))},mounted(){},unmounted(){},methods:{selectFolder(){void 0!==this.$qtBridge&&this.$qtBridge.selectFolder(this.imagesFolder)},openFolder(){void 0!==this.$qtBridge&&this.$qtBridge.openFolder(this.imagesFolder)},onImagesFolderChange(e){this.imagesFolder=e,localStorage.setItem("download_dir",e)},saveConfig(){this.saving=!0;let e={api_key:this.apiKey,schedule_time:this.scheduleTime,download_dir:this.imagesFolder,switch_model:this.switchModel,full_model:this.fullModel,bg_color:this.bgColor,auto_start:this.autoStart};this.$axios.post("/api/setting/save",e).then((e=>{"success"===e?(localStorage.setItem("api_key",this.apiKey),localStorage.setItem("schedule_time",this.scheduleTime),localStorage.setItem("download_dir",this.imagesFolder),localStorage.setItem("switch_model",this.switchModel),localStorage.setItem("full_model",this.fullModel),localStorage.setItem("auto_start",this.autoStart),localStorage.setItem("bg_color",this.bgColor),this.$message({message:"保存成功。",type:"success",duration:2e3})):"api key error"===e?S.alert("API Key 不正确！","提示",{confirmButtonText:"OK"}):this.$message({message:"保存失败。",type:"error",duration:2e3}),this.saving=!1})).catch((e=>{this.saving=!1}))}},watch:{}};a("data-v-71965f63");const ys={id:"main"},Ps={class:"setting-list"},_s={class:"setting-group"},xs=i("div",{class:"setting-group-title"},"壁纸设置",-1),ks={class:"setting-group-content"},Is={class:"setting-item"},Ss=i("a",{class:"setting-title"},"切换模式",-1),Cs={class:"setting-content"},Ls=g("在线切换"),Vs=g("本地切换"),Fs={class:"setting-item"},$s=i("a",{class:"setting-title"},"填充模式",-1),Ds={class:"setting-content"},Us=g("填充"),Ms=g("适应"),js=g("拉伸"),Ns=g("平铺"),zs=g("居中"),Es=g("跨区"),Rs=i("div",{class:"model-preview-title"},[i("a",null,"预览")],-1),Ts={class:"model-preview"},Bs={class:"bg-color-selector"},Os=g("背景颜色： "),As={class:"setting-item"},Hs=i("a",{class:"setting-title"},"定时切换",-1),Ws={class:"setting-content"},qs=g("关闭"),Js=g("10分钟"),Ks=g("30分钟"),Qs=g("1小时"),Gs=g("3小时"),Xs=g("5小时"),Ys={class:"setting-group"},Zs=i("div",{class:"setting-group-title"},"系统设置",-1),eo={class:"setting-group-content"},to={class:"setting-item"},ao=i("a",{class:"setting-title"},"API Key",-1),so=g("设置API Key可解锁NSFW图片"),oo=i("br",null,null,-1),lo=g("访问：“https://wallhaven.cc/settings/account” 获取API Key"),io=i("a",{class:"api-key-tips"},[i("i",{class:"fas fa-question-circle"})],-1),no={class:"setting-content"},ro={class:"setting-item"},co=i("a",{class:"setting-title"},"壁纸文件夹",-1),uo={class:"setting-content"},mo=[i("i",{class:"fas fa-folder-open"},null,-1)],go={class:"setting-item"},po=i("a",{class:"setting-title"},"开机自启",-1),ho={class:"setting-content"},fo=g("关闭"),bo=g("打开"),wo={class:"setting-bottom"},vo=["disabled"],yo=g(" 保存设置 "),Po=[i("i",{class:"fas fa-spinner"},null,-1)];s(),vs.render=function(e,t,a,s,g,f){const b=o("pageHeader"),w=o("el-radio"),v=o("el-color-picker"),y=o("el-tooltip"),P=o("el-input");return m(),l(u,null,[r(b,{title:g.title},null,8,["title"]),i("main",ys,[i("div",Ps,[i("div",_s,[xs,i("div",ks,[i("div",Is,[Ss,i("div",Cs,[r(w,{class:"custom-radio",modelValue:g.switchModel,"onUpdate:modelValue":t[0]||(t[0]=e=>g.switchModel=e),label:"online",size:"large"},{default:c((()=>[Ls])),_:1},8,["modelValue"]),r(w,{class:"custom-radio",modelValue:g.switchModel,"onUpdate:modelValue":t[1]||(t[1]=e=>g.switchModel=e),label:"local",size:"large"},{default:c((()=>[Vs])),_:1},8,["modelValue"])])]),i("div",Fs,[$s,i("div",Ds,[r(w,{modelValue:g.fullModel,"onUpdate:modelValue":t[2]||(t[2]=e=>g.fullModel=e),label:0,size:"large"},{default:c((()=>[Us])),_:1},8,["modelValue"]),r(w,{modelValue:g.fullModel,"onUpdate:modelValue":t[3]||(t[3]=e=>g.fullModel=e),label:1,size:"large"},{default:c((()=>[Ms])),_:1},8,["modelValue"]),r(w,{modelValue:g.fullModel,"onUpdate:modelValue":t[4]||(t[4]=e=>g.fullModel=e),label:2,size:"large"},{default:c((()=>[js])),_:1},8,["modelValue"]),r(w,{modelValue:g.fullModel,"onUpdate:modelValue":t[5]||(t[5]=e=>g.fullModel=e),label:3,size:"large"},{default:c((()=>[Ns])),_:1},8,["modelValue"]),r(w,{modelValue:g.fullModel,"onUpdate:modelValue":t[6]||(t[6]=e=>g.fullModel=e),label:4,size:"large"},{default:c((()=>[zs])),_:1},8,["modelValue"]),r(w,{modelValue:g.fullModel,"onUpdate:modelValue":t[7]||(t[7]=e=>g.fullModel=e),label:5,size:"large"},{default:c((()=>[Es])),_:1},8,["modelValue"]),Rs,i("div",Ts,[i("div",{class:"bg-color",style:d({backgroundColor:g.bgColor})},[i("div",{class:n(["bg-view",0===g.fullModel?"bg-fill":1===g.fullModel?"bg-adapt":2===g.fullModel?"bg-stretch":3===g.fullModel?"bg-tile":4===g.fullModel?"bg-center":5===g.fullModel?"bg-trans-region":""])},null,2)],4),i("div",Bs,[Os,r(v,{"color-format":"rgb",modelValue:g.bgColor,"onUpdate:modelValue":t[8]||(t[8]=e=>g.bgColor=e)},null,8,["modelValue"])])])])]),i("div",As,[Hs,i("div",Ws,[r(w,{modelValue:g.scheduleTime,"onUpdate:modelValue":t[9]||(t[9]=e=>g.scheduleTime=e),label:0,size:"large"},{default:c((()=>[qs])),_:1},8,["modelValue"]),r(w,{modelValue:g.scheduleTime,"onUpdate:modelValue":t[10]||(t[10]=e=>g.scheduleTime=e),label:10,size:"large"},{default:c((()=>[Js])),_:1},8,["modelValue"]),r(w,{modelValue:g.scheduleTime,"onUpdate:modelValue":t[11]||(t[11]=e=>g.scheduleTime=e),label:30,size:"large"},{default:c((()=>[Ks])),_:1},8,["modelValue"]),r(w,{modelValue:g.scheduleTime,"onUpdate:modelValue":t[12]||(t[12]=e=>g.scheduleTime=e),label:60,size:"large"},{default:c((()=>[Qs])),_:1},8,["modelValue"]),r(w,{modelValue:g.scheduleTime,"onUpdate:modelValue":t[13]||(t[13]=e=>g.scheduleTime=e),label:180,size:"large"},{default:c((()=>[Gs])),_:1},8,["modelValue"]),r(w,{modelValue:g.scheduleTime,"onUpdate:modelValue":t[14]||(t[14]=e=>g.scheduleTime=e),label:300,size:"large"},{default:c((()=>[Xs])),_:1},8,["modelValue"])])])])]),i("div",Ys,[Zs,i("div",eo,[i("div",to,[ao,r(y,{placement:"top",effect:"light","popper-class":"custom-tips api-key-tooltip"},{content:c((()=>[so,oo,lo])),default:c((()=>[io])),_:1}),i("div",no,[r(P,{class:"api-key-input",modelValue:g.apiKey,"onUpdate:modelValue":t[15]||(t[15]=e=>g.apiKey=e)},null,8,["modelValue"])])]),i("div",ro,[co,i("div",uo,[r(P,{class:"images-folder",readonly:"true",modelValue:g.imagesFolder,"onUpdate:modelValue":t[16]||(t[16]=e=>g.imagesFolder=e)},null,8,["modelValue"]),i("button",{type:"button",id:"select-folder",onClick:t[17]||(t[17]=(...e)=>f.selectFolder&&f.selectFolder(...e))},"选择"),i("button",{type:"button",id:"open-folder",onClick:t[18]||(t[18]=(...e)=>f.openFolder&&f.openFolder(...e))},mo)])]),i("div",go,[po,i("div",ho,[r(w,{class:"custom-radio",modelValue:g.autoStart,"onUpdate:modelValue":t[19]||(t[19]=e=>g.autoStart=e),label:0,size:"large"},{default:c((()=>[fo])),_:1},8,["modelValue"]),r(w,{class:"custom-radio",modelValue:g.autoStart,"onUpdate:modelValue":t[20]||(t[20]=e=>g.autoStart=e),label:1,size:"large"},{default:c((()=>[bo])),_:1},8,["modelValue"])])])])])]),i("div",wo,[i("button",{type:"button",disabled:g.saving,class:n(["config-submit",g.saving?"saving":""]),onClick:t[21]||(t[21]=(...e)=>f.saveConfig&&f.saveConfig(...e))},[yo,p(i("span",null,Po,512),[[h,g.saving]])],10,vo)])])],64)},vs.__scopeId="data-v-71965f63";const _o={name:"setting",data:()=>({title:"关于"}),components:{ElTimeline:C,ElCard:L,ElTimelineItem:V,pageHeader:Le},props:[],created(){},mounted(){},unmounted(){},methods:{},watch:{}},xo={id:"main"},ko={class:"info-box"},Io=i("p",null,[g("    该软件由个人开发，开发目的是因为觉得每次下载壁纸再手动去换太麻烦了，所以动手写了这个程序。 该软件所有数据均来自网站（wallhaven.cc）的 api 提供，如果由侵权，请联系开发者删除。 "),i("br"),i("br"),g(" github：https://github.com/leoFitz1024/wallhaven")],-1),So={class:"version-box"},Co=i("h3",{class:"custom-card-title"},"Version 1.0.0",-1),Lo=i("ul",{class:"fun-list"},[i("li",null,"条件筛选壁纸"),i("li",null,"自动下载壁纸"),i("li",null,"定时切换壁纸")],-1),Vo=i("h3",{class:"custom-card-title"},"Version 2.0.0",-1),Fo=i("ul",{class:"fun-list"},[i("li",null,"条件筛选壁纸"),i("li",null,"在线查看壁纸"),i("li",null,"一键设置壁纸"),i("li",null,"下载任务列表"),i("li",null,"在线定时切换壁纸"),i("li",null,"本地文件夹切换壁纸"),i("li",null,"多种壁纸自适应模式"),i("li",null,"开机自启")],-1);_o.render=function(e,t,a,s,n,d){const g=o("pageHeader"),p=o("el-card"),h=o("el-timeline-item"),f=o("el-timeline");return m(),l(u,null,[r(g,{title:n.title},null,8,["title"]),i("main",xo,[i("div",ko,[r(p,{class:"info-card custom-card"},{default:c((()=>[Io])),_:1})]),i("div",So,[r(f,null,{default:c((()=>[r(h,{class:"custom-item",timestamp:"2021-12-31",placement:"top"},{default:c((()=>[r(p,{class:"custom-card"},{default:c((()=>[Co,Lo])),_:1})])),_:1}),r(h,{class:"custom-item",timestamp:"2022-01-24",placement:"top"},{default:c((()=>[r(p,{class:"custom-card"},{default:c((()=>[Vo,Fo])),_:1})])),_:1})])),_:1})])])],64)};const $o=[{path:"/",component:Fe},{path:"/online",name:"online",component:Fe},{path:"/switch",name:"switchList",component:ca},{path:"/download",name:"downlloadList",component:Da},{path:"/setting",name:"setting",component:vs},{path:"/about",name:"about",component:_o},{path:"/preview",name:"preview",component:ve}],Do=F({history:$(),routes:$o});function Uo(e){return("00"+e).substr(e.length)}const Mo=D(W);Mo.config.globalProperties.$inQt=!0,Mo.config.globalProperties.$message=t,Mo.config.globalProperties.$axios=U,Mo.config.globalProperties.$DataFormat=function(e,t){/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));let a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(let s in a)if(new RegExp(`(${s})`).test(t)){let e=a[s]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?e:Uo(e))}return t},Mo.config.globalProperties.$inQt&&new function(e,t){if("object"==typeof e&&"function"==typeof e.send){var a=this;this.transport=e,this.send=function(e){"string"!=typeof e&&(e=JSON.stringify(e)),a.transport.send(e)},this.transport.onmessage=function(e){var t=e.data;switch("string"==typeof t&&(t=JSON.parse(t)),t.type){case M:a.handleSignal(t);break;case A:a.handleResponse(t);break;case j:a.handlePropertyUpdate(t);break;default:console.error("invalid message received:",e.data)}},this.execCallbacks={},this.execId=0,this.exec=function(e,t){t?(a.execId===Number.MAX_VALUE&&(a.execId=Number.MIN_VALUE),e.hasOwnProperty("id")?console.error("Cannot exec message with property id: "+JSON.stringify(e)):(e.id=a.execId++,a.execCallbacks[e.id]=t,a.send(e))):a.send(e)},this.objects={},this.handleSignal=function(e){var t=a.objects[e.object];t?t.signalEmitted(e.signal,e.args):console.warn("Unhandled signal: "+e.object+"::"+e.signal)},this.handleResponse=function(e){e.hasOwnProperty("id")?(a.execCallbacks[e.id](e.data),delete a.execCallbacks[e.id]):console.error("Invalid response message received: ",JSON.stringify(e))},this.handlePropertyUpdate=function(e){for(var t in e.data){var s=e.data[t],o=a.objects[s.object];o?o.propertyUpdate(s.signals,s.properties):console.warn("Unhandled property update: "+s.object+"::"+s.signal)}a.exec({type:z})},this.debug=function(e){a.send({type:E,data:e})},a.exec({type:N},(function(e){for(var s in e)new H(s,e[s],a);for(var s in a.objects)a.objects[s].unwrapProperties();t&&t(a),a.exec({type:z})}))}else console.error("The QWebChannel expects a transport object with a send function and onmessage callback property. Given is: transport: "+typeof e+", transport.send: "+typeof e.send)}(qt.webChannelTransport,(function(e){Mo.config.globalProperties.$qtBridge=e.objects.webBridge})),Mo.config.globalProperties.$imgPrefix=U.baseURL+"/api/local/img?path=",Mo.use(Do),Mo.mount("#app");
